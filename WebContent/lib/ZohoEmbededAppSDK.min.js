var ZOHO={};
ZOHO.embededApp=function(){function b(a){return a&&"object"===typeof a?!0:!1}var g=void 0,e=/^https?:\/\/[a-zA-Z0-9-_]*.(csez.zohocorpin.com|zoho.com|zohoplatform.com|zohosandbox.com)(:[0-9]{0,4})?$/,f=void 0;this.callBackMap={};return{isAllowedOrigin:function(a){return e.test(a)?!0:(console.error("Ignoring Message from:"+a+" with Data:"+event.data),!1)},events:{DialerActive:function(a){console.info("DialerActive:"+JSON.stringify(a))},Dial:function(a){console.info("Dial : "+JSON.stringify(a))},PageLoad:function(a){console.info("PageLoad : "+
JSON.stringify(a))}},customEvents:{},init:function(a){if(b(a)){var d=a.events;if(b(d))for(temp in d)this.events[temp]&&(this.events[temp]=d[temp]);a=a.customEvents;if(b(a))for(temp in a)this.customEvent[temp]=a[temp]}},request:function(a){var b=Math.random().toString(36).substr(2,16);window.parent.postMessage({"MESSAGE.FROM":"EMBEDDED_APP",WidgetID:g,CallBackID:b,Data:a},f);var c;a=new Promise(function(a,b){c=a});callBackMap[b]={promise:c};return a},handlePostMessage:function(a){a&&("WIDGET.CONFIG"===
a.type?(g=a.config.WidgetID,f=a.config.TargetOrigin):this.handleMsg(a))},handleMsg:function(a){var b=a.Event,c=a.wd;"WIDGET.EVENT"===a.type?(a=ZOHO.embededApp.events[b],"function"===typeof a&&a(c)):"WIDGET.CUSTOM_EVENT"===a.type?(a=ZOHO.embededApp.customEvents[b],"function"===typeof a&&a(c)):"WIDGET.CALL_BACK"===a.type&&(a=callBackMap[a.callBackID].promise,a(c))}}}();
window.addEventListener("message",function(b){b&&ZOHO.embededApp.isAllowedOrigin(b.origin||b.originalEvent.origin)&&(b=b.data,"object"===typeof b&&"EMBEDDED_APP"===b["MESSAGE.TO"]&&ZOHO.embededApp.handlePostMessage(b["MESSAGE.CONTENT"]))});ZOHO.CRM=function(){function b(a){return new Promise(function(b,c){ZOHO.embededApp.request(a).then(function(a){b(a)})})}function g(a,d,c,h){a={category:"Create",Entity:a,RelatedID:c,APIData:d};a.type=h||"Record";return b(a)}function e(a,d){var c=d.url,h=d.params,f=d.headers,g=d.body;if(!c)throw{Message:"Url missing"};if(h){var e=[],k;for(k in h)e.push(encodeURIComponent(k)+"\x3d"+encodeURIComponent(h[k]));h=e.join("\x26");c+=(-1<c.indexOf("?")?"\x26":"?")+h}debugger;return b({category:"Connector",
nameSpace:a,data:{url:c,Header:f,Body:g}})}function f(a){$.extend(a,{category:"UI"});return b(a)}return{CONFIG:{getOrgVariable:function(a){return b({category:"CONFIG",type:"variable",nameSpace:a})},getUserInfo:function(){return b({category:"CONFIG",type:"user",nameSpace:void 0})}},API:{addNotes:function(a){return g(a.Entity,{data:[{Note_Title:a.Title,Note_Content:a.Content}]},a.RecordID,"Notes")},insertRecord:function(a){return g(a.Entity,a.APIData)},getRecord:function(a){return b({category:"Read",
Entity:a.Entity,RecordID:a.RecordID})},getAllRecords:function(a){return b({category:"Read",APIData:a})},updateRecord:function(a){return b({category:"Update",type:"Record",Entity:a.Entity,APIData:a.APIData})},getRecord:function(a){return b({category:"Read",Entity:a.Entity,RecordID:a.RecordID})},deleteRecord:function(a){return b({category:"Delete",type:"Record",Entity:a.Entity,RecordID:a.RecordID})},searchRecord:function(a){return b({category:"Search",Entity:a.Entity,Type:a.Type,Query:a.Query})}},INTERACTION:{getPageInfo:function(){return b({category:"PageInfo"})}},
UI:{Dialer:{maximize:function(){return f({action:{telephony:"maximize"}})},minimize:function(){return f({action:{telephony:"minimize"}})},notify:function(){return f({action:{telephony:"notify"}})},resize:function(a,b){}}},HTTP:{get:function(a){return e("wget.post",a)},post:function(a){return e("wget.post",a)}},CONNECTOR:{invokeAPI:function(a,b){return e(a,b)}}}}();