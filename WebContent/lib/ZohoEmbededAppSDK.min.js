var ZOHO={};
ZOHO.embededApp=function(){function b(a){return a&&"object"===typeof a?!0:!1}var d=void 0;this.callBackMap={};return{isAllowedOrigin:function(a){return"https://crmplugins.zoho.com"!=a?(console.error("Ignoring Message from:"+a+" with Data:"+event.data),!1):!0},events:{TelephonyInit:function(a){console.info("TelephonyInit:"+JSON.stringify(a))},TelephonyCall:function(a){console.info("TelephonyCall : "+JSON.stringify(a))},EntityPageLoad:function(a){console.info("EntityPageLoad : "+JSON.stringify(a))}},customEvents:{},
init:function(a){if(b(a)){var e=a.events;if(b(e))for(temp in e)this.events[temp]&&(this.events[temp]=e[temp]);a=a.customEvents;if(b(a))for(temp in a)this.customEvent[temp]=a[temp]}},request:function(a){var b=Math.random().toString(36).substr(2,16);window.parent.postMessage({WidgetID:d,CallBackID:b,Data:a},"https://crmplugins.zoho.com");var c;a=new Promise(function(a,b){c=a});callBackMap[b]={promise:c};return a},handleEvent:function(a){"Config"==a.data.type?d=a.data.config.widgetID:this.handleMsg(a.data)},
handleMsg:function(a){var b=a.Event,c=a.wd;"Event"===a.type?(a=ZOHO.embededApp.events[b],"function"===typeof a&&a(c)):"CustomEvent"===a.type?(a=ZOHO.embededApp.customEvents[b],"function"===typeof a&&a(c)):"CallBack"===a.type&&(a=callBackMap[a.callBackID].promise,a(c))}}}();window.addEventListener("message",function(b){ZOHO.embededApp.isAllowedOrigin(b.origin||b.originalEvent.origin)&&b&&"object"===typeof b.data&&ZOHO.embededApp.handleEvent(b)});ZOHO.CRM=function(){function b(a){return new Promise(function(b,c){ZOHO.embededApp.request(a).then(function(a){b(a)})})}function d(a){$.extend(a,{category:"UI"});return b(a)}return{CONFIG:{get:function(){}},API:{addNotes:function(a){var d=a.Entity,c=a.RecordID;a=JSON.stringify({data:[{Note_Title:a.Title,Note_Content:a.Content}]});return b({category:"Create",Entity:d,RelatedEntity:"Notes",RelatedID:c,APIData:a})},getRecord:function(a){return b({category:"Read",Entity:a.Entity,RecordID:a.RecordID})},
getPageInfo:function(){return b({category:"PageInfo"})}},UI:{telephony:{maximize:function(){return d({action:{telephony:"maximize"}})},minimize:function(){return d({action:{telephony:"minimize"}})},notify:function(){return d({action:{telephony:"notify"}})}}}}}();