var ZOHO={};
ZOHO.embeddedApp=function(){var c=void 0,f=/^https?:\/\/[a-zA-Z0-9-_]*.(csez.zohocorpin.com|zoho.com|zohoplatform.com|zohosandbox.com)(:[0-9]{0,4})?$/,h=void 0,e={};return{events:{},on:function(b,c){this.events[b]||(this.events[b]=[]);this.events[b].push(c)},init:function(){var b,c,d=new Promise(function(a,k){b=a;c=k});this.initPromise={resolve:b,reject:c};return d},isAllowedOrigin:function(b){return f.test(b)?!0:(console.error("Ignoring Message from:"+b+" with Data:"+event.data),!1)},handlePostMessage:function(b){b&&
("WIDGET.CONFIG"===b.type?(c=b.config.WidgetID,h=b.config.TargetOrigin,this.initPromise&&this.initPromise.resolve&&this.initPromise.resolve()):this.handleMsg(b))},handleMsg:function(b){var c=b.Event,d=b.wd;"WIDGET.EVENT"===b.type?(b=ZOHO.embeddedApp.events[c],"object"===typeof b&&b.forEach(function(a){"function"===typeof a&&setTimeout(function(){a(d);console.log(new Date)},0)})):"WIDGET.CALL_BACK"===b.type?(b=b.callBackID,b=e[b],b=b.promise,b(d)):"WIDGET.CALL_BACK.EXCEPTION"===b.type&&(b=b.callBackID,
b=e[b],b=b.reject,b(d))},request:function(b){var g=Math.random().toString(36).substr(2,16);window.parent.postMessage({"MESSAGE.FROM":"EMBEDDED_APP",WidgetID:c,CallBackID:g,Data:b},h);var d,a;b=new Promise(function(b,c){d=b;a=c});e[g]={promise:d,reject:a};return b}}}();window.addEventListener("message",function(c){c&&ZOHO.embeddedApp.isAllowedOrigin(c.origin||c.originalEvent.origin)&&(c=c.data,"object"===typeof c&&"EMBEDDED_APP"===c["MESSAGE.TO"]&&ZOHO.embeddedApp.handlePostMessage(c["MESSAGE.CONTENT"]))});ZOHO.CRM=function(){function c(a){return ZOHO.embeddedApp.request(a)}function f(a,b,l,d){a={category:"CREATE",Entity:a,RelatedID:l,APIData:b};a.type=d||"RECORD";return c(a)}function h(a,b,d){return c({category:"READ",APIData:{Entity:a,RecordID:b,RelatedList:d}})}function e(a,b,d){var e=void 0;if(d&&"CONNECTOR"!=d){d=b.url;var g=b.params,e=b.headers;b=b.body;if(!d)throw{Message:"Url missing"};if(g){var f,h=[];for(f in g)h.push(encodeURIComponent(f)+"\x3d"+encodeURIComponent(g[f]));f=h.join("\x26");
d+=(-1<d.indexOf("?")?"\x26":"?")+f}e={url:d,Header:e,Body:b}}else e=b;return c({category:"CONNECTOR",nameSpace:a,data:e})}function b(a){$.extend(a,{category:"UI"});return c(a)}function g(a,b){return c({category:"CONFIG",type:a,nameSpace:b})}function d(a){var b={category:"USER"};a.ID?b.ID=a.ID:a.Type&&(b.Type=a.Type);return c(b)}return{CONFIG:{getOrgVariable:function(a){return g("VARIABLE",a)},getOrgInfo:function(a){return g("ORG")},getCurrentUser:function(){return g("CURRENT_USER").then(function(a){return a[0]})}},
API:{addNotes:function(a){return f(a.Entity,{data:[{Note_Title:a.Title,Note_Content:a.Content}]},a.RecordID,"NOTES")},addNotesAttachment:function(a){return c({category:"UPDATE",type:"NOTES",Entity:a.Entity,RecordID:a.RecordID,RelatedRecordID:a.RelatedRecordID,APIData:{Files:{FileName:File.Name,FileData:File.Content}}})},insertRecord:function(a){return f(a.Entity,a.APIData)},getRecord:function(a){return h(a.Entity,a.RecordID)},getAllRecords:function(a){return c({category:"READ",APIData:a})},updateRecord:function(a){return c({category:"UPDATE",
type:"RECORD",Entity:a.Entity,APIData:a.APIData})},deleteRecord:function(a){return c({category:"DELETE",type:"RECORD",Entity:a.Entity,RecordID:a.RecordID})},searchRecord:function(a){return c({category:"SEARCH",Entity:a.Entity,Type:a.Type,Query:a.Query})},getAllUsers:function(a){return d({Type:a.Type})},getUser:function(a){return d({ID:a.ID})},getAllUsers:function(a){return d({Type:a.Type})},getRelatedRecords:function(a){return h(a.Entity,a.RecordID,a.RelatedList)},updateRelatedRecords:function(a){return c({category:"UPDATE",
type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID,APIData:a.APIData})},delinkRelatedRecord:function(a){return c({category:"DELETE",type:"RELATED_RECORD",Entity:a.Entity,RecordID:a.RecordID,RelatedList:a.RelatedList,RelatedRecordID:a.RelatedRecordID})},attachFile:function(a){var b=a.Entity,c=a.RecordID;a=a.File;a={FileName:a.Name,FileData:a.Content};return f(b,a,c,"ATTACHMENT")}},INTERACTION:{getPageInfo:function(){return c({category:"PAGEINFO"})}},
UI:{Dialer:{maximize:function(){return b({action:{telephony:"MAXIMIZE"}})},minimize:function(){return b({action:{telephony:"MINIMIZE"}})},notify:function(){return b({action:{telephony:"NOTIFY"}})},resize:function(a,b){}}},HTTP:{get:function(a){return e("wget.post",a)},post:function(a){return e("wget.post",a)}},CONNECTOR:{invokeAPI:function(a,b){return e(a,b,"CONNECTOR")}}}}();